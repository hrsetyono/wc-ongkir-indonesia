!function(t){var i={};function e(n){if(i[n])return i[n].exports;var o=i[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}e.m=t,e.c=i,e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:n})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,i){if(1&i&&(t=e(t)),8&i)return t;if(4&i&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(e.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var o in t)e.d(n,o,function(i){return t[i]}.bind(null,o));return n},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},e.p="",e(e.s=3)}([function(t,i,e){},,,function(t,i,e){"use strict";e.r(i);e(0);const n=ongkirLocalize.ONGKIR_API;var o={get(t){return window.fetch(`${n}${t}`,{method:"GET",headers:{Accept:"application/json"}}).then(this.handleError).then(this.handleContentType).catch(this.throwError)},post(t,i){return window.fetch(`${n}${t}`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(i)}).then(this.handleError).then(this.handleContentType).catch(this.throwError)},handleError:t=>t.ok?t:Promise.reject(t.statusText),handleContentType(t){const i=t.headers.get("content-type");return i&&i.includes("application/json")?t.json():Promise.reject("Oops, we haven't got JSON!")},throwError(t){throw new Error(t)}};const l=jQuery,r={init(){this.isFirstRun=!0;document.querySelector("body").classList.contains("woocommerce-checkout")&&(l(document).on("change","#billing_country, #shipping_country",this.toggleCityField.bind(this)),l(document).on("change","#billing_state, #shipping_state",this.populateCitiesDropdown.bind(this)),this.createFields(),l(document).on("change","#_billing_city, #_shipping_city",this.populateDistrictsDropdown.bind(this)),l(document).on("change","#_billing_district, #_shipping_district",this.fillCityField.bind(this)))},createFields(){document.querySelectorAll("#billing_city, #shipping_city").forEach(async t=>{const i="billing_city"===t.getAttribute("id")?"billing":"shipping",e=t.closest(".woocommerce-billing-fields, .woocommerce-shipping-fields"),n=t.closest("#billing_city_field, #shipping_city_field");let r=e.querySelector("#billing_state, #shipping_state").value;r=r||"0";let c=t.value.match(/\[(\d+)\]/);c=c?c[1]:"0";const s=await o.get(`/fields/${i}/${r}/${c}`);l(n).after(s),l("#billing_country, #shipping_country").trigger("change")})},toggleCityField(t){const i=t.currentTarget.closest(".woocommerce-billing-fields, .woocommerce-shipping-fields"),e=i.querySelector("#billing_city_field, #shipping_city_field"),n=i.querySelector("#_billing_city_field, #_shipping_city_field"),o=i.querySelector("#_billing_district_field, #_shipping_district_field");"ID"===t.currentTarget.value?(e.style.display="none",n&&(n.style.display="block"),o&&(o.style.display="block")):(e.style.display="block",n&&(n.style.display="none"),o&&(o.style.display="none"))},async populateCitiesDropdown(t){const i=l(t.currentTarget).val()||"0",e=l(t.currentTarget).closest(".woocommerce-billing-fields, .woocommerce-shipping-fields");if(!this.isFirstRun){e.find("#billing_city_field, #shipping_city_field").find("input").val("")}const n=e.find("#_billing_city_field select, #_shipping_city_field select");n.html("<option>Loading...</option>");e.find("#_billing_district_field select, #_shipping_district_field select").html("<option>Pilih Kota terlebih dahulu...</option>");const r=await o.get("/cities/"+i);let c="";Object.keys(r).forEach(t=>{c+=`<option value="${t}">${r[t]}</option>`}),n.html(c),this.isFirstRun=!1},async populateDistrictsDropdown(t){const i=l(t.currentTarget).val(),e=l(t.currentTarget).closest(".woocommerce-billing-fields, .woocommerce-shipping-fields"),n=e.find("#billing_state, #shipping_state").val(),r=e.find("#_billing_district_field select, #_shipping_district_field select");r.html("<option>Loading...</option>");const c=await o.get(`/districts/${n}/${i}`);let s="";Object.keys(c).forEach(t=>{s+=`<option value="${t}">${c[t]}</option>`}),r.html(s)},fillCityField(t){const i=l(t.currentTarget),e=i.closest(".woocommerce-billing-fields, .woocommerce-shipping-fields").find("#billing_city, #shipping_city");e.val(i.val()),e.trigger("keydown")}};document.addEventListener("DOMContentLoaded",(function(){r.init()})),window.addEventListener("load",(function(){}))}]);